<div class="user-form">
  <!-- Dynamic title -->
  <h3>{{ mode === 'viewDetails' ? 'View User' : mode === 'edit' ? 'Edit User' : 'Create User' }}</h3>

  <!-- Reactive Form -->
  <form [formGroup]="userForm" *ngIf="mode !== 'viewDetails'" class="form-container">
    <div class="form-group">
      <label for="firstName">First Name:</label>
      <input
        id="firstName"
        formControlName="firstName"
        type="text"
        placeholder="Enter first name"
      />
      <div *ngIf="userForm.get('firstName')?.invalid && userForm.get('firstName')?.touched" class="error">
        First Name is required.
      </div>
    </div>

    <div class="form-group">
      <label for="lastName">Last Name:</label>
      <input
        id="lastName"
        formControlName="lastName"
        type="text"
        placeholder="Enter last name"
      />
      <div *ngIf="userForm.get('lastName')?.invalid && userForm.get('lastName')?.touched" class="error">
        Last Name is required.
      </div>
    </div>

    <div class="form-group">
      <label for="email">Email:</label>
      <input
        id="email"
        formControlName="email"
        type="email"
        placeholder="Enter email"
      />
      <div *ngIf="userForm.get('email')?.invalid && userForm.get('email')?.touched" class="error">
        Valid email is required.
      </div>
    </div>

    <div class="form-group">
      <label for="dob">Date of Birth:</label>
      <input
        id="dob"
        formControlName="birthDate"
        type="date"
      />
      <div *ngIf="userForm.get('birthDate')?.invalid && userForm.get('birthDate')?.touched" class="error">
        Date of Birth is required.
      </div>
    </div>

    <div class="form-group">
      <label for="gender">Gender:</label>
      <select id="gender" formControlName="gender">
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
      <div *ngIf="userForm.get('gender')?.invalid && userForm.get('gender')?.touched" class="error">
        Gender is required.
      </div>
    </div>

    <div class="form-group">
      <label for="age">Age:</label>
      <input
        id="age"
        formControlName="age"
        type="number"
        placeholder="Enter age"
      />
      <div *ngIf="userForm.get('age')?.invalid && userForm.get('age')?.touched" class="error">
        Age is required and must be greater than 0.
      </div>
    </div>

    <!-- Action buttons -->
    <div class="action-buttons">
      <button mat-raised-button color="primary" type="button" (click)="onSave()">Save</button>
      <button mat-raised-button color="warn" type="button" (click)="onClose()">Cancel</button>
    </div>
  </form>

  <!-- Display user details for 'viewDetails' mode -->
  <div *ngIf="mode === 'viewDetails'" class="view-container">
    <p><strong>First Name:</strong> {{ user?.firstName }}</p>
    <p><strong>Last Name:</strong> {{ user?.lastName }}</p>
    <p><strong>Email:</strong> {{ user?.email }}</p>
    <p><strong>Gender:</strong> {{ user?.gender }}</p>
    <p><strong>Age:</strong> {{ user?.age }}</p>
    <p><strong>Date of Birth:</strong> {{ user?.birthDate | date: 'mediumDate' }}</p>

    <div class="view-action">
      <button mat-raised-button color="primary" type="button" (click)="onClose()">Close</button>
    </div>
  </div>
</div>
